# QuantaAlpha Web Dashboard - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ¯ é¡¹ç›®æ¦‚è§ˆ

åŸºäº **React + FastAPI** çš„å¯¹è¯å¼ AI é©±åŠ¨é‡åŒ–å› å­æŒ–æ˜å¹³å° Web çœ‹æ¿ã€‚

### âœ¨ ä¸»è¦ç‰¹æ€§
1. **è‡ªç„¶è¯­è¨€è¾“å…¥** - ç”¨å¯¹è¯æ–¹å¼æè¿°éœ€æ±‚ï¼Œæ— éœ€ç¼–ç¨‹
2. **å®æ—¶è¿›åº¦å±•ç¤º** - é˜¶æ®µè¯†åˆ«ã€è¿›åº¦æ¡ã€æ—¥å¿—æµ
3. **å®æ—¶å›æµ‹ç»“æœ** - IC æŒ‡æ ‡ã€æ”¶ç›Šç‡ã€å›æ’¤å®æ—¶æ›´æ–°
4. **äº¤äº’å¼å¯è§†åŒ–** - å‡€å€¼æ›²çº¿ã€å›æ’¤åˆ†æã€å› å­åˆ†å¸ƒ
5. **å› å­åº“ç®¡ç†** - æµè§ˆã€æœç´¢ã€ç­›é€‰å·²æŒ–æ˜çš„å› å­
6. **ç³»ç»Ÿé…ç½®** - ç»Ÿä¸€ç®¡ç† API Keyã€Qlib è·¯å¾„ã€é»˜è®¤å‚æ•°

### ğŸ“ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·æµè§ˆå™¨                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         React å‰ç«¯ (localhost:3000)              â”‚  â”‚
â”‚  â”‚  - å› å­æŒ–æ˜ (å¯¹è¯å¼è¾“å…¥ + å®æ—¶å›¾è¡¨)              â”‚  â”‚
â”‚  â”‚  - å› å­åº“ (æµè§ˆ/æœç´¢/ç­›é€‰)                       â”‚  â”‚
â”‚  â”‚  - ç‹¬ç«‹å›æµ‹ (é€‰åº“ â†’ è¿è¡Œ â†’ ç»“æœ)                â”‚  â”‚
â”‚  â”‚  - ç³»ç»Ÿè®¾ç½® (API/è·¯å¾„/å‚æ•°)                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â†• HTTP REST API + WebSocket                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚       FastAPI åç«¯ (localhost:8000)              â”‚  â”‚
â”‚  â”‚  - REST API (ä»»åŠ¡ç®¡ç†ã€å› å­åº“è¯»å–)               â”‚  â”‚
â”‚  â”‚  - WebSocket (å®æ—¶æ—¥å¿—/è¿›åº¦æ¨é€)                  â”‚  â”‚
â”‚  â”‚  - å­è¿›ç¨‹è°ƒç”¨ quantaalpha CLI                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â†• subprocess                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        QuantaAlpha æ ¸å¿ƒ (quantaalpha CLI)        â”‚  â”‚
â”‚  â”‚  - å› å­æŒ–æ˜ (quantaalpha mine)                   â”‚  â”‚
â”‚  â”‚  - ç‹¬ç«‹å›æµ‹ (quantaalpha.backtest.run_backtest)  â”‚  â”‚
â”‚  â”‚  - å› å­åº“ (all_factors_library*.json)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### å‰ææ¡ä»¶

- å·²å®Œæˆä¸»é¡¹ç›®å®‰è£…ï¼ˆ`pip install -e .`ï¼‰
- å·²é…ç½® `.env` æ–‡ä»¶
- Node.js 18+

### æ–¹æ³• 1: ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
conda activate quantaalpha   # æˆ–ä½ çš„ conda ç¯å¢ƒå
cd frontend-v2
bash start.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… æ£€æŸ¥ Node.js å’Œ Python ç¯å¢ƒ
- âœ… å®‰è£…å‰ç«¯ä¾èµ– (`npm install`)
- âœ… å®‰è£…åç«¯ä¾èµ– (`pip install`)
- âœ… å¯åŠ¨åç«¯æœåŠ¡ (ç«¯å£ 8000)
- âœ… å¯åŠ¨å‰ç«¯æœåŠ¡ (ç«¯å£ 3000)

### æ–¹æ³• 2: æ‰‹åŠ¨å¯åŠ¨

**ç»ˆç«¯ 1 - åç«¯:**
```bash
conda activate quantaalpha
cd frontend-v2
pip install -r backend/requirements.txt
python backend/app.py
```

**ç»ˆç«¯ 2 - å‰ç«¯:**
```bash
cd frontend-v2
npm install
npm run dev
```

### è®¿é—®åº”ç”¨

- ğŸŒ **å‰ç«¯ç•Œé¢**: http://localhost:3000
- ğŸ”§ **API æ–‡æ¡£**: http://localhost:8000/docs
- ğŸ“Š **å¥åº·æ£€æŸ¥**: http://localhost:8000/api/health

## ğŸ’¡ ä½¿ç”¨æµç¨‹

### 1ï¸âƒ£ å› å­æŒ–æ˜

1. ç‚¹å‡»é¡¶éƒ¨ **"å› å­æŒ–æ˜"** èœå•
2. åœ¨åº•éƒ¨è¾“å…¥æ¡†è¾“å…¥éœ€æ±‚ï¼Œä¾‹å¦‚ï¼š`è¯·å¸®æˆ‘æŒ–æ˜åŠ¨é‡ç±»å› å­`
3. ç‚¹å‡» âš™ï¸ è°ƒæ•´é«˜çº§é…ç½®ï¼ˆå¯é€‰ï¼‰
4. ç‚¹å‡» ğŸš€ å¼€å§‹æ‰§è¡Œ
5. è§‚å¯Ÿå·¦ä¾§è¿›åº¦å’Œå³ä¾§å›¾è¡¨å®æ—¶æ›´æ–°

### 2ï¸âƒ£ æŸ¥çœ‹å› å­åº“

1. ç‚¹å‡»é¡¶éƒ¨ **"å› å­åº“"** èœå•
2. æµè§ˆæ‰€æœ‰å·²æŒ–æ˜çš„å› å­
3. ä½¿ç”¨æœç´¢æ¡†æˆ–è´¨é‡ç­›é€‰æŒ‰é’®
4. ç‚¹å‡»å› å­å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…

### 3ï¸âƒ£ ç‹¬ç«‹å›æµ‹

1. ç‚¹å‡»é¡¶éƒ¨ **"å›æµ‹"** èœå•
2. é€‰æ‹©å› å­åº“ JSON æ–‡ä»¶
3. é€‰æ‹©å›æµ‹æ¨¡å¼ï¼ˆCustom / Combinedï¼‰
4. æŸ¥çœ‹å›æµ‹ç»“æœæŒ‡æ ‡

### 4ï¸âƒ£ ç³»ç»Ÿè®¾ç½®

1. ç‚¹å‡»é¡¶éƒ¨ **"è®¾ç½®"** èœå•
2. é…ç½® API Keyã€Qlib æ•°æ®è·¯å¾„ç­‰
3. ç‚¹å‡» **"ä¿å­˜é…ç½®"**

## ğŸ”Œ API ç«¯ç‚¹

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/health` | å¥åº·æ£€æŸ¥ |
| POST | `/api/v1/mining/start` | å¯åŠ¨å› å­æŒ–æ˜ |
| GET | `/api/v1/mining/{taskId}` | è·å–æŒ–æ˜ä»»åŠ¡çŠ¶æ€ |
| DELETE | `/api/v1/mining/{taskId}` | å–æ¶ˆæŒ–æ˜ä»»åŠ¡ |
| POST | `/api/v1/backtest/start` | å¯åŠ¨ç‹¬ç«‹å›æµ‹ |
| GET | `/api/v1/backtest/{taskId}` | è·å–å›æµ‹ä»»åŠ¡çŠ¶æ€ |
| GET | `/api/v1/factors` | åˆ†é¡µæŸ¥è¯¢å› å­åº“ |
| GET | `/api/v1/factors/libraries` | åˆ—å‡ºæ‰€æœ‰å› å­åº“æ–‡ä»¶ |
| GET | `/api/v1/factors/cache-status` | å› å­ç¼“å­˜çŠ¶æ€ |
| POST | `/api/v1/factors/warm-cache` | é¢„çƒ­å› å­ç¼“å­˜ |
| GET | `/api/v1/system/config` | è·å–ç³»ç»Ÿé…ç½® |
| PUT | `/api/v1/system/config` | æ›´æ–°ç³»ç»Ÿé…ç½® |
| WS | `/ws/mining/{taskId}` | WebSocket å®æ—¶æ¨é€ |

### WebSocket æ¶ˆæ¯ç±»å‹
- `progress` - è¿›åº¦æ›´æ–°
- `log` - æ—¥å¿—æ¡ç›®
- `metrics` - æŒ‡æ ‡æ›´æ–°
- `result` - æœ€ç»ˆç»“æœ
- `heartbeat` - å¿ƒè·³ä¿æ´»

## ğŸ› å¸¸è§é—®é¢˜

### å‰ç«¯å¯åŠ¨æŠ¥é”™ "Cannot find module"
```bash
rm -rf node_modules package-lock.json
npm install
```

### åç«¯å¯åŠ¨æŠ¥é”™ "Address already in use"
```bash
lsof -ti:8000 | xargs kill -9
python backend/app.py
```

### WebSocket è¿æ¥å¤±è´¥
- ç¡®è®¤åç«¯è¿è¡Œåœ¨ 8000 ç«¯å£
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ CORS é”™è¯¯
- Vite ä»£ç†é…ç½®ä¼šè‡ªåŠ¨è½¬å‘ `/ws` åˆ°åç«¯

### å› å­åº“é¡µé¢ä¸ºç©º
- éœ€è¦å…ˆè¿è¡Œå› å­æŒ–æ˜å®éªŒç”Ÿæˆ `all_factors_library*.json`
- æˆ–é€šè¿‡æŒ–æ˜é¡µé¢å¯åŠ¨ä¸€æ¬¡å®éªŒ

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
frontend-v2/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/                    # åŸºç¡€ UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/Layout.tsx      # ç»Ÿä¸€å¸ƒå±€ï¼ˆHeader + å¯¼èˆªï¼‰
â”‚   â”‚   â”œâ”€â”€ ChatInput.tsx          # åº•éƒ¨å¯¹è¯å¼è¾“å…¥æ¡†
â”‚   â”‚   â”œâ”€â”€ LiveCharts.tsx         # å®æ—¶å›¾è¡¨
â”‚   â”‚   â”œâ”€â”€ ProgressSidebar.tsx    # è¿›åº¦ä¾§æ 
â”‚   â”‚   â””â”€â”€ ParticleBackground.tsx # ç²’å­åŠ¨ç”»èƒŒæ™¯
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ HomePage.tsx           # å› å­æŒ–æ˜é¡µ
â”‚   â”‚   â”œâ”€â”€ FactorLibraryPage.tsx  # å› å­åº“é¡µ
â”‚   â”‚   â”œâ”€â”€ BacktestPage.tsx       # ç‹¬ç«‹å›æµ‹é¡µ
â”‚   â”‚   â””â”€â”€ SettingsPage.tsx       # ç³»ç»Ÿè®¾ç½®é¡µ
â”‚   â”œâ”€â”€ context/TaskContext.tsx     # å…¨å±€çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ services/api.ts            # API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ types/index.ts             # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ App.tsx                    # è·¯ç”±å…¥å£
â”‚   â””â”€â”€ main.tsx                   # åº”ç”¨å…¥å£
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app.py                     # FastAPI åç«¯ï¼ˆREST + WebSocketï¼‰
â”‚   â””â”€â”€ requirements.txt           # Python åç«¯ä¾èµ–
â”œâ”€â”€ start.sh                       # ä¸€é”®å¯åŠ¨è„šæœ¬
â”œâ”€â”€ package.json                   # å‰ç«¯ä¾èµ–
â”œâ”€â”€ vite.config.ts                 # Vite é…ç½®ï¼ˆä»£ç† /api â†’ 8000ï¼‰
â””â”€â”€ tailwind.config.js             # TailwindCSS é…ç½®
```

## ğŸ“Š æŠ€æœ¯æ ˆ

- **å‰ç«¯**: React 18 + TypeScript + Vite + TailwindCSS + Recharts
- **åç«¯**: FastAPI + Python 3.10+ + WebSocket
- **çŠ¶æ€ç®¡ç†**: React Context + React Query
- **æ ·å¼**: TailwindCSS + è‡ªå®šä¹‰ CSSï¼ˆæ·±è‰²ä¸»é¢˜ï¼‰

---

Made with â¤ï¸ by QuantaAlpha Team
